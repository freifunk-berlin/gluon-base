assert(env.GLUON_LANGS)

config('CONFIG_GLUON_SITEDIR="%s"', env.GLUON_SITEDIR)
config('CONFIG_GLUON_RELEASE="%s"', env.GLUON_RELEASE)
try_config('CONFIG_GLUON_BRANCH="%s"', env.GLUON_BRANCH or '')

for lang in string.gmatch(env.GLUON_LANGS, '%S+') do
	try_config('CONFIG_GLUON_WEB_LANG_%s=y', lang)
end

-- Disable non-default feeds in distfeeds.conf
config('# CONFIG_FEED_gluon_base is not set')

config '# CONFIG_TARGET_ROOTFS_INITRAMFS is not set'

config 'CONFIG_ALL_NONSHARED=y'

config '# CONFIG_PACKAGE_usbip is not set' -- fails to build
config '# CONFIG_PACKAGE_kmod-jool is not set' -- fails to build

config 'CONFIG_BUSYBOX_CUSTOM=y'
config '# CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_IPV4_ADDRESS is not set'

config 'CONFIG_PACKAGE_ATH_DEBUG=y'

config '# CONFIG_KERNEL_IP_MROUTE is not set'
config '# CONFIG_KERNEL_IPV6_MROUTE is not set'

try_config 'CONFIG_TARGET_MULTI_PROFILE=y'
try_config 'CONFIG_TARGET_PER_DEVICE_ROOTFS=y'

if envtrue.GLUON_MULTIDOMAIN then
	config 'CONFIG_GLUON_MULTIDOMAIN=y'
end


packages {
	'-odhcpd-ipv6only',
	'-ppp',
	'-ppp-mod-pppoe',
	'-wpad-mini',
	'-wpad-basic',
	'gluon-core',
	'ip6tables',
}
